We known the flag starts with a 'F' and the XORed first value in data is 'b'
'F' ^ 'b' gives us the key '$'. Just use the key on the loop they gave to get the flag.
